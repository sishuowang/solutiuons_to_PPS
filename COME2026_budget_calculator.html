<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CoME 2026 Budget Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 700px;
      margin: auto;
      background-color: #f9f9f9;
    }
    h2 {
      color: #333;
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }
    input[type="number"] {
      width: 100px;
      margin-left: 10px;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 1em;
      cursor: pointer;
    }
    .result {
      margin-top: 30px;
      font-size: 1.1em;
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }
    .section {
      margin-top: 25px;
    }
    .item {
      margin-bottom: 8px;
    }
    .great-deal {
      color: green;
      font-size: 1.2em;
      margin-top: 10px;
    }
    .warning {
      color: red;
      font-size: 1.2em;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<h2>CoME 2026 Budget Calculator</h2>
<p><em>Note: The total available funds is roughly ¥300,000 (from SYSU) + HK$100,000 (from CUHK) ≈ ¥391,000 ≈ €47,000.</em></p>

<div class="section">
  <label>Instructors/TAs: <input type="number" id="staffCount" value="17"></label>
  <label>Replaced by local instructors/TAs: <input type="number" id="no_replaced" value="2"></label>
  <label>Students: <input type="number" id="studentCount" value="35"></label>
  <label>Accommodation Rate (per instructor/TA per night, breakfast included): <input type="number" id="accommodationRate" value="600"></label>
  <label>Instructors/TAs staying for half the workshop: <input type="number" id="staffHalfCount" value="0"></label>
  <label>Shuttle Bus Rate (per day): <input type="number" id="shuttleRate" value="1500"></label>
  <label>Number of Nights: <input type="number" id="nights" value="11"></label>
  <label>Catering Rate (per person per day): <input type="number" id="cateringRate" value="200"></label>
  <label>Registration Fee (per student, accommodation excluded): <input type="number" id="registrationFee" value="2000"></label>
</div>

<button onclick="calculateBudget()">Calculate Budget</button>

<div class="result" id="output"></div>

<script>
  function calculateBudget() {
    const staff = Number(document.getElementById('staffCount').value);
    const no_replaced = Number(document.getElementById('no_replaced').value);
    const staffHalf = Number(document.getElementById('staffHalfCount').value);
    const students = Number(document.getElementById('studentCount').value);
    const accommodationRate = Number(document.getElementById('accommodationRate').value);
    const nights = Number(document.getElementById('nights').value);
    const cateringRate = Number(document.getElementById('cateringRate').value);
    const registrationFee = Number(document.getElementById('registrationFee').value);
    const shuttleRate = Number(document.getElementById('shuttleRate').value);

    const activeStaff = staff - no_replaced;

    const travel = activeStaff * 10000;
    const accommodation = (activeStaff - staffHalf) * accommodationRate * nights + staffHalf * accommodationRate * (nights / 2);
    const catering = (staff + students) * cateringRate * nights;
    const localTransport = 6000;
    const shuttleBus = shuttleRate * nights;
    const excursion = 20000;
    const consumables = 3000;

    const totalExpenses = travel + accommodation + catering + localTransport + shuttleBus + excursion + consumables;
    const income = students * registrationFee;
    const netExpense = totalExpenses - income;

    const nonLocalStudentFee = registrationFee + (accommodationRate / 2 * nights);
    const nonLocalStudentFeeEuro = nonLocalStudentFee * 0.12;

    let dealMessage = "";
    if (netExpense < 391000) {
      dealMessage = `<div class="great-deal">✅ Great deal!</div>`;
    } else {
      dealMessage = `<div class="warning">⚠️ Exceeds the available funds ¥391,000! Consider increasing the registration fee or eating more environmentally friendly!</div>`;
    }

    document.getElementById('output').innerHTML = `
      <div class="section">
        <div class="item">✈️ <strong>Travel:</strong> ¥10,000 × ${activeStaff} = ¥${travel.toLocaleString()}</div>
        <div class="item">🏨 <strong>Accommodation:</strong> Calculated with ${activeStaff - staffHalf} full-stay and ${staffHalf} half-stay staff = ¥${accommodation.toLocaleString()}</div>
        <div class="item">🍱 <strong>Catering:</strong> ¥${cateringRate} × ${staff + students} × ${nights} days = ¥${catering.toLocaleString()}</div>
        <div class="item">🚕 <strong>Local Transport:</strong> Fixed = ¥${localTransport.toLocaleString()}</div>
        <div class="item">🚌 <strong>Shuttle Bus:</strong> ¥${shuttleRate} × ${nights} days = ¥${shuttleBus.toLocaleString()}</div>
        <div class="item">🎉 <strong>Excursion:</strong> Fixed = ¥${excursion.toLocaleString()}</div>
        <div class="item">🧃 <strong>Consumables:</strong> Fixed = ¥${consumables.toLocaleString()}</div>
      </div>

      <div class="section">
        <div class="item">💰 <strong>Total Expenses:</strong> ¥${totalExpenses.toLocaleString()}</div>
        <div class="item">🎓 <strong>Registration Income:</strong> ¥${registrationFee} × ${students} = ¥${income.toLocaleString()}</div>
        <div class="item">📉 <strong>Net Expense:</strong> ¥${netExpense.toLocaleString()}</div>
        ${dealMessage}
      </div>

      <div class="section">
        <div style="height: 15px;"></div>
        <div class="item"><strong>For students to pay:</strong></div>
        <div class="item">🎓 Registration + accommodation fee per non-local student (sharing room): ¥${registrationFee} + (¥${accommodationRate} ÷ 2 × ${nights}) = <strong>¥${nonLocalStudentFee.toLocaleString()}</strong> ≈ <strong>€${nonLocalStudentFeeEuro.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</strong></div>
      </div>
    `;
  }
</script>

</body>
</html>