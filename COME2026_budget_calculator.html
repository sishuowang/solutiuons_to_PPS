<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CoME 2026 Budget Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 700px;
      margin: auto;
      background-color: #f9f9f9;
    }
    h2 {
      color: #333;
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }
    input[type="number"] {
      width: 100px;
      margin-left: 10px;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 1em;
      cursor: pointer;
    }
    .result {
      margin-top: 30px;
      font-size: 1.1em;
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }
    .section {
      margin-top: 25px;
    }
    .item {
      margin-bottom: 8px;
    }
    .great-deal {
      color: green;
      font-size: 1.2em;
      margin-top: 10px;
    }
    .warning {
      color: red;
      font-size: 1.2em;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<h2>CoME 2026 Budget Calculator</h2>
<p><em>Note: The total available funds is roughly Â¥300,000 (from SYSU) + HK$100,000 (from CUHK) â‰ˆ Â¥391,000 â‰ˆ â‚¬47,000.</em></p>

<div class="section">
  <label>Flight ticket (default 10000): <input type="number" id="flightTicket" value="10000"></label>
  <label>Instructors/TAs (default 17): <input type="number" id="staffCount" value="17"></label>
  <label>Replaced by local instructors/TAs (default 2): <input type="number" id="no_replaced" value="2"></label>
  <label>Students (default 35): <input type="number" id="studentCount" value="35"></label>
  <label>Accommodation Rate (per instructor/TA per night, breakfast excluded): <input type="number" id="accommodationRate" value="600"></label>
  <label>Instructors/TAs staying for half the workshop: <input type="number" id="staffHalfCount" value="0"></label>
  <label>Shuttle Bus Rate (per day): <input type="number" id="shuttleRate" value="1800"></label>
  <label>Number of Nights: <input type="number" id="nights" value="11"></label>
  <label>Catering Rate (per person/meal): <input type="number" id="cateringRate" value="100"></label>
  <label>No. of meals: <input type="number" id="mealNo" value="2"></label>
  <label>Local Transport (per instructor): <input type="number" id="localTransportRate" value="350"></label>
  <label>Excursion: <input type="number" id="excursionFee" value="20000"></label>
  <label>Consumables and others: <input type="number" id="consumableFee" value="3000"></label>
  <label>
  Registration Fee (accommodation excluded):
  <input type="number" id="registrationFee" value="2500" style="color: red;">
</label>
</div>

<button onclick="calculateBudget()">Calculate Budget</button>

<div class="result" id="output"></div>

<script>
  function calculateBudget() {
    const flightTicket = Number(document.getElementById('flightTicket').value);
	const staff = Number(document.getElementById('staffCount').value);
    const no_replaced = Number(document.getElementById('no_replaced').value);
    const staffHalf = Number(document.getElementById('staffHalfCount').value);
    const students = Number(document.getElementById('studentCount').value);
    const accommodationRate = Number(document.getElementById('accommodationRate').value);
    const nights = Number(document.getElementById('nights').value);
    const cateringRate = Number(document.getElementById('cateringRate').value);
    const registrationFee = Number(document.getElementById('registrationFee').value);
    const shuttleRate = Number(document.getElementById('shuttleRate').value);

    const nonlocalStaff = staff - no_replaced;

    const travel = nonlocalStaff * flightTicket;
    const accommodation = (nonlocalStaff - staffHalf) * accommodationRate * nights + staffHalf * accommodationRate * (nights / 2);
	
	const mealNo = Number(document.getElementById('mealNo').value);
    const catering = (staff + students) * cateringRate * nights * mealNo;
    const localTransportRate = Number(document.getElementById('localTransportRate').value);
	const localTransport = localTransportRate * staff;
	
    const shuttleBus = shuttleRate * nights;
    const excursion = Number(document.getElementById('excursionFee').value);
    const consumables = Number(document.getElementById('consumableFee').value);

    const totalExpenses = travel + accommodation + catering + localTransport + shuttleBus + excursion + consumables;
    const income = students * registrationFee;
    const netExpense = totalExpenses - income;

    const nonLocalStudentFee = registrationFee + (accommodationRate / 2 * nights);
    const nonLocalStudentFeeEuro = nonLocalStudentFee * 0.12;

    let dealMessage = "";
    if (netExpense < 391000) {
      dealMessage = `<div class="great-deal">âœ… Great deal!</div>`;
    } else {
      dealMessage = `<div class="warning">âš ï¸ Exceeds the available funds Â¥391,000! Consider increasing the registration fee or eating more environmentally friendly!</div>`;
    }

    document.getElementById('output').innerHTML = `
      <div class="section">
        <div class="item">âœˆï¸ <strong>Travel:</strong> Â¥10,000 Ã— ${nonlocalStaff} = Â¥${travel.toLocaleString()}</div>
        <div class="item">ğŸ¨ <strong>Accommodation:</strong> Calculated with ${nonlocalStaff - staffHalf} full-stay and ${staffHalf} half-stay staff = Â¥${accommodation.toLocaleString()}</div>
        <div class="item">ğŸ± <strong>Catering:</strong> Â¥${cateringRate} Ã— ${mealNo} Ã— ${staff + students} Ã— ${nights} days = Â¥${catering.toLocaleString()}</div>
        <div class="item">ğŸš• <strong>Local Transport:</strong> Â¥${cateringRate} Ã— ${nonlocalStaff} = Â¥${localTransport.toLocaleString()}</div>
        <div class="item">ğŸšŒ <strong>Shuttle Bus:</strong> Â¥${shuttleRate} Ã— ${nights} days = Â¥${shuttleBus.toLocaleString()}</div>
        <div class="item">ğŸ‰ <strong>Excursion:</strong> Â¥${excursion.toLocaleString()}</div>
        <div class="item">ğŸ§ƒ <strong>Consumables and others:</strong> Â¥${consumables.toLocaleString()}</div>
      </div>

      <div class="section">
        <div class="item">ğŸ’° <strong>Total Expenses:</strong> Â¥${totalExpenses.toLocaleString()}</div>
        <div class="item">ğŸ“ <strong>Registration Income:</strong> Â¥${registrationFee} Ã— ${students} = Â¥${income.toLocaleString()}</div>
        <div class="item">ğŸ“‰ <strong>Net Expense:</strong> Â¥${netExpense.toLocaleString()}</div>
        ${dealMessage}
      </div>

      <div class="section">
        <div style="height: 15px;"></div>
        <div class="item"><strong>For students to pay:</strong></div>
        <div class="item">ğŸ“ Registration + accommodation fee per non-local student (sharing room): Â¥${registrationFee} + (Â¥${accommodationRate} Ã· 2 Ã— ${nights}) = <strong>Â¥${nonLocalStudentFee.toLocaleString()}</strong> â‰ˆ <strong>â‚¬${nonLocalStudentFeeEuro.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</strong></div>
      </div>
    `;
  }
</script>

</body>
</html>
